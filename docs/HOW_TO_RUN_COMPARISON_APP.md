# How to Run the DNA Sequence Comparison App

This guide provides step-by-step instructions on how to run the DNA sequence comparison app, which allows you to compare original DNA sequences with synthetic sequences generated by different GAN models.

## Prerequisites

- Python 3.10
- pip (Python package installer)
- Trained GAN models (or you can use the dummy data option)

## Option 1: Using the Provided Scripts

### On Windows

1. Open a command prompt
2. Navigate to the project directory:
   ```
   cd path\to\DNA_GAN_Project
   ```
3. Run the batch script:
   ```
   run_comparison_app.bat
   ```

### On Unix/MacOS

1. Open a terminal
2. Navigate to the project directory:
   ```
   cd path/to/DNA_GAN_Project
   ```
3. Make the script executable:
   ```
   chmod +x run_comparison_app.sh
   ```
4. Run the shell script:
   ```
   ./run_comparison_app.sh
   ```

## Option 2: Manual Setup

### Step 1: Create and Activate a Virtual Environment

#### On Windows

```bash
python -m venv env310
env310\Scripts\activate
```

#### On Unix/MacOS

```bash
python -m venv env310
source env310/bin/activate
```

### Step 2: Install Required Packages

```bash
pip install torch numpy matplotlib tqdm scikit-learn biopython streamlit
```

### Step 3: Run the Comparison App

```bash
python run_comparison_app.py --prepare-data
```

The `--prepare-data` flag generates dummy data for visualization if you don't have the actual data files.

## Using the App with Trained Models

If you have trained GAN models and want to use them to generate sequences:

1. Make sure your model checkpoints are in the correct locations:
   - Gumbel-Softmax GAN: `models/gumbel_softmax_gan/checkpoints/final_model.pt`
   - Improved WGAN-GP: `models/improved_wgan/checkpoints/improved_dna_gan/final_model.pt`

2. Run the app without the `--prepare-data` flag:
   ```bash
   python run_comparison_app.py
   ```

3. In the app, use the "Generate Sequences" buttons to generate sequences from your trained models.

## App Features

The comparison app includes the following pages:

1. **Home**: Overview of the project and buttons to generate sequences
2. **Original Data**: Visualization of the original DNA sequences
3. **Generated Data**: Visualization of the generated DNA sequences with options to generate new sequences
4. **Model Comparison**: Comparison between the original and generated sequences

### Home Page

The home page provides an overview of the available models and features. You can generate sequences from both models using the provided buttons.

### Original Data Page

This page displays:
- Sample sequences from the original dataset
- Nucleotide distribution
- GC content
- Sequence length distribution
- Top k-mers

### Generated Data Page

This page allows you to:
- Select which model's generated sequences to view
- Generate new sequences with the selected model
- View sample generated sequences
- Analyze nucleotide distribution, GC content, sequence length distribution, and top k-mers

### Model Comparison Page

This page provides a comprehensive comparison between the original data and sequences generated by both models:
- Side-by-side metrics comparison (GC content, sequence diversity, average length)
- Nucleotide distribution comparison
- k-mer distribution comparison
- Conclusion and key findings

## Troubleshooting

### Port Already in Use

If port 8501 is already in use, you can specify a different port:

```bash
python run_comparison_app.py --port 8502
```

### Missing Data Files

If you see warnings about missing data files, make sure you've used the `--prepare-data` flag or that your data files are in the correct location:

```
DNA_GAN_Project/data/clean_all_dna_sequences.fasta
DNA_GAN_Project/data/gumbel_generated_sequences.fasta
DNA_GAN_Project/data/improved_generated_sequences.fasta
```

### Model Checkpoint Not Found

If you're trying to generate sequences but get an error about missing model checkpoints, make sure your trained models are in the correct locations or use the `--prepare-data` flag to use dummy data instead.
